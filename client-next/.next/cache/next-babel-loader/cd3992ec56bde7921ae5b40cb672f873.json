{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sagi.levi\\\\DevProjects\\\\sawtooth-dev\\\\client-next\\\\src\\\\OpenCampaign.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport { toast, ToastContainer } from 'react-toastify';\n\nconst axios = require('axios');\n\nconst OpenCampaign = ({\n  campaigns,\n  setCampaigns,\n  openCampaignClickHandler\n}) => {\n  const {\n    0: campaignName,\n    1: setCampaignName\n  } = useState('');\n  const {\n    0: nameValid,\n    1: setNameValid\n  } = useState(false);\n  const {\n    0: sendProcessing,\n    1: setSendProcessing\n  } = useState(false);\n\n  function validateCampaignName(name) {\n    // const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    // return re.test(mail);\n    return true;\n  }\n\n  async function addCampaignReqHandler(event) {\n    event.preventDefault();\n    setSendProcessing(true);\n\n    try {\n      const serverRes = await axios.post(`http://127.0.0.1:5000/open_campaign?name=${campaignName}`);\n      const {\n        res,\n        success\n      } = serverRes.data;\n      console.log(serverRes);\n\n      if (success) {\n        const {\n          id,\n          link,\n          name\n        } = res;\n        const enabled = [...campaigns.enabled, {\n          name,\n          id,\n          link\n        }];\n        setCampaigns(_objectSpread(_objectSpread({}, campaigns), {}, {\n          enabled\n        }));\n        setCampaignName('');\n        toast.info(`Campaign ${campaignName} has been added succesfully`);\n      } else {\n        toast.info(`An error has occured: `);\n        console.log(res);\n      }\n    } catch (err) {\n      console.log(err);\n      toast.info(`An error has occured: ${err.message}`);\n    }\n\n    setSendProcessing(false);\n  }\n\n  const buttonText = sendProcessing ? 'processing...' : 'Submit';\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }), __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"campaignName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, \"Campaign Name\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    id: \"campaignName\",\n    name: \"CampaignName\",\n    \"aria-describedby\": \"campaign name\",\n    placeholder: \"Enter Campaign name\",\n    value: campaignName,\n    onChange: e => {\n      setNameValid(validateCampaignName(e.target.value));\n      return setCampaignName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }), __jsx(\"small\", {\n    id: \"emailHelp\",\n    className: \"form-text text-muted\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"This name will show publicly to all users\")), __jsx(\"button\", {\n    disabled: !nameValid || sendProcessing,\n    className: \"btn btn-primary\",\n    onClick: addCampaignReqHandler,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, buttonText)));\n};\n\nexport default OpenCampaign;","map":{"version":3,"sources":["C:/Users/sagi.levi/DevProjects/sawtooth-dev/client-next/src/OpenCampaign.js"],"names":["React","useEffect","useState","toast","ToastContainer","axios","require","OpenCampaign","campaigns","setCampaigns","openCampaignClickHandler","campaignName","setCampaignName","nameValid","setNameValid","sendProcessing","setSendProcessing","validateCampaignName","name","addCampaignReqHandler","event","preventDefault","serverRes","post","res","success","data","console","log","id","link","enabled","info","err","message","buttonText","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nconst axios = require('axios');\r\n\r\nconst OpenCampaign = ({\r\n  campaigns,\r\n  setCampaigns,\r\n  openCampaignClickHandler,\r\n}) => {\r\n  const [campaignName, setCampaignName] = useState('');\r\n  const [nameValid, setNameValid] = useState(false);\r\n  const [sendProcessing, setSendProcessing] = useState(false);\r\n\r\n  function validateCampaignName(name) {\r\n    // const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    // return re.test(mail);\r\n    return true;\r\n  }\r\n\r\n  async function addCampaignReqHandler(event) {\r\n    event.preventDefault();\r\n    setSendProcessing(true);\r\n    try {\r\n      const serverRes = await axios.post(\r\n        `http://127.0.0.1:5000/open_campaign?name=${campaignName}`,\r\n      );\r\n      const { res, success } = serverRes.data;\r\n      console.log(serverRes);\r\n      if (success) {\r\n        const { id, link, name } = res;\r\n        const enabled = [...campaigns.enabled, { name, id, link }];\r\n        setCampaigns({ ...campaigns, enabled });\r\n        setCampaignName('');\r\n        toast.info(`Campaign ${campaignName} has been added succesfully`);\r\n      } else {\r\n        toast.info(`An error has occured: `);\r\n        console.log(res);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n      toast.info(`An error has occured: ${err.message}`);\r\n    }\r\n    setSendProcessing(false);\r\n  }\r\n\r\n  const buttonText = sendProcessing ? 'processing...' : 'Submit';\r\n\r\n  return (\r\n    <div>\r\n      <ToastContainer />\r\n      <form>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"campaignName\">Campaign Name</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"campaignName\"\r\n            name=\"CampaignName\"\r\n            aria-describedby=\"campaign name\"\r\n            placeholder=\"Enter Campaign name\"\r\n            value={campaignName}\r\n            onChange={(e) => {\r\n              setNameValid(validateCampaignName(e.target.value));\r\n              return setCampaignName(e.target.value);\r\n            }}\r\n          />\r\n          <small id=\"emailHelp\" className=\"form-text text-muted\">\r\n            This name will show publicly to all users\r\n          </small>\r\n        </div>\r\n        <button\r\n          disabled={!nameValid || sendProcessing}\r\n          className=\"btn btn-primary\"\r\n          onClick={addCampaignReqHandler}\r\n          type=\"submit\"\r\n        >\r\n          {buttonText}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OpenCampaign;\r\n"]},"metadata":{},"sourceType":"module"}